{"pageProps":{"url":"https://launchmenu.github.io/docs/concepts/base/iocontext","source":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"section\", {\n    \"name\": \"IO context\",\n    \"depth\": 1\n  }, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"IO context\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"The IO context is passed around in many areas of LaunchMenu, and is used to provide services that your applet can interact with. These services include:\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Management of an UI stack\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tracking of whether LM/an applet is running in dev mode\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An undo/redo facility\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A settings context from which setting values for your module can be extracted\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"All the global context menu bindings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Possibly A reference to the LM session the context is for\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Below is the exact interface of an IOContext:\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"title=IIOContext.ts source=https://github.com/LaunchMenu/LaunchMenu/blob/master/packages/core/src/context/_types/IIOContext.ts\",\n    \"title\": \"IIOContext.ts\",\n    \"source\": \"https://github.com/LaunchMenu/LaunchMenu/blob/master/packages/core/src/context/_types/IIOContext.ts\"\n  }, \"export type IIOContext = {\\n    /**\\n     * Retrieves all the UI data opened in this context\\n     * @param hook The hook to subscribe to changes\\n     * @returns All the opened UI layers\\n     */\\n    getUI(hook?: IDataHook): IUILayer[];\\n    /**\\n     * Opens the given UI layer\\n     * @param layer The layer of UI data to open\\n     * @param config Extra configuration\\n     * @returns A function that can be used to close the opened layer\\n     */\\n    open(\\n        layer: IUILayer,\\n        config?: {\\n            /** A callback to perform when the layer is closed */\\n            onClose?: () => void | Promise<void>;\\n            /** The index on the stack to open this layer at */\\n            index?: number;\\n        }\\n    ): Promise<() => void>;\\n    /**\\n     * Closes the given UI layer\\n     * @param layer The layer of UI data to close\\n     */\\n    close(layer: IUILayer): Promise<void>;\\n\\n    /**\\n     * Whether LM is running in dev mode\\n     * @param hook The hook to subscribe to changes\\n     * @returns Whether dev mode is enabled\\n     */\\n    isInDevMode(hook?: IDataHook): boolean;\\n\\n    /** The undo redo facility to undo changes */\\n    readonly undoRedo: IUndoRedoFacility;\\n    /** The application settings */\\n    readonly settings: SettingsContext;\\n    /** The default context menu bindings to add to all context menus */\\n    readonly contextMenuBindings: ISubscribable<IActionBinding[]>;\\n    /** The session that this context is for */\\n    readonly session?: LMSession;\\n};\\n\")), mdx(\"section\", {\n    parentName: \"section\",\n    \"name\": \"Usage\",\n    \"depth\": 2\n  }, mdx(\"h2\", {\n    parentName: \"section\"\n  }, \"Usage\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"There are several situations in which the context becomes of use:\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wanting to dispatch \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/docs/concepts/interaction/undo-redo#commands\"\n  }, \"undoable commands\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wanting to open new UI \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/docs/concepts/ui/uilayers\"\n  }, \"using UI layers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wanting to extract settings\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"And since all of these are quite common, we're passing the context around to as manu places as possible. Here's a list of common places that you have access to the context:\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/docs/concepts/interaction/search-system#searchables\"\n  }, \"a search query\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://localhost:3000/docs/concepts/applet-format#open\"\n  }, \"a open callback\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From a ui component using the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"useIOContext\"), \" React hook\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"From \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/docs/concepts/interaction/common-actions#execute-action\"\n  }, \"an execute handler\")))), mdx(\"section\", {\n    parentName: \"section\",\n    \"name\": \"Overriding\",\n    \"depth\": 2\n  }, mdx(\"h2\", {\n    parentName: \"section\"\n  }, \"Overriding\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"This context is passed around explicitely, in order to allow yoou to override parts of the context. For instance, if some component that you want to use makes use of the undo/redo facility, but you don't want to mix the usage history of this component with the global one, you can supply your own undo/redo facility.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Overriding some part of the context is done easily, by using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IOContext\"), \" class and specifying what the parent context is:\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\",\n    \"metastring\": \"title=contextOverrideExample.ts\",\n    \"title\": \"contextOverrideExample.ts\"\n  }, \"const context = // ... some existing context\\nconst customUndoRedo = new UndoRedoFacility();\\nconst subContext = new IOContext({\\n    parent: context,\\n    undoRedo: customUndoRedo\\n});\\n\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"By specifying an existing context as the parent, the parent's properties are inheretted. Additionally, the newly made sub-context is wrapped in a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SubIOContextLayer\"), \" \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/docs/concepts/ui/uilayers\"\n  }, \"ui layer\"), \" and added to the original context's UI. This way, when any UI is added to the sub-context, it will also become part of the orginal context. When you're done with your custom context, you can call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".destroy()\"), \" to close all its UI and remove it from its parent.\")), mdx(\"section\", {\n    parentName: \"section\",\n    \"name\": \"Custom context\",\n    \"depth\": 2\n  }, mdx(\"h2\", {\n    parentName: \"section\"\n  }, \"Custom context\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"One can also create an antirely new context. To this context you may pass your own facilities, or facilities from an existing context (possibly by passing the whole context as a shorthand). Then the UI of your own context will be independent of the rest of LaunchMenu, and you can do with it what you want.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"In the example below a custom context is created, and used to render a LaunchMenu layout within the section that's usually only contains the content of LaunchMenu. We then add a fake watermark on top of the entire UI, and open an existing applet using our custom context:\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\",\n    \"metastring\": \"title=src/index.tsx source=https://github.com/LaunchMenu/LM-applet-examples/tree/main/examples/baseContext video=https://raw.github.com/LaunchMenu/LM-applet-examples/main/examples/baseContext/recordings/demo.webm\",\n    \"title\": \"src/index.tsx\",\n    \"source\": \"https://github.com/LaunchMenu/LM-applet-examples/tree/main/examples/baseContext\",\n    \"video\": \"https://raw.github.com/LaunchMenu/LM-applet-examples/main/examples/baseContext/recordings/demo.webm\"\n  }, \"const WaterMarked: FC<{context: IOContext}> = ({context}) => {\\n    const [key, setKey] = useState(1);\\n\\n    // Force a refresh after some delay, as this is required for the application layout to properly calculate the menu width (this is a bug)\\n    useEffect(() => {\\n        let id = setTimeout(() => setKey(2), 200);\\n        return () => clearTimeout(id);\\n    }, []);\\n\\n    return (\\n        <FillBox>\\n            <ApplicationLayout key={key} context={context} />\\n            <Box\\n                position=\\\"absolute\\\"\\n                right=\\\"none\\\"\\n                top=\\\"none\\\"\\n                font=\\\"header\\\"\\n                zIndex={100}\\n                padding=\\\"medium\\\">\\n                Powered by Bob\\n            </Box>\\n        </FillBox>\\n    );\\n};\\n\\nexport default declare({\\n    info,\\n    settings,\\n    withSession(session) {\\n        const getSettingsApplet = () =>\\n            session.getApplets().find(({info}) => info.name.match(/settings/i));\\n\\n        return {\\n            open({context, onClose}) {\\n                const customContext = new IOContext(context);\\n                const settingsApplet = getSettingsApplet();\\n                if (!settingsApplet || !settingsApplet.open) return;\\n\\n                // Hide the content section by default\\n                customContext.open(\\n                    new UILayer(\\n                        {contentView: {close: true}},\\n                        {\\n                            // Prevent transparent overlay from showing\\n                            showNodataOverlay: false,\\n                        }\\n                    )\\n                );\\n\\n                // Open a new layer in the regular context,  containing our watermarked UI + opened settings + forward key events\\n                context.open(\\n                    new UILayer((ctx, close) => {\\n                        settingsApplet!.open!({\\n                            context: customContext,\\n                            onClose: () => {\\n                                close();\\n                                onClose();\\n                            },\\n                        });\\n\\n                        return {\\n                            fieldView: {close: true},\\n                            menuView: {close: true},\\n                            contentView: (\\n                                <WaterMarked context={customContext} />\\n                            ),\\n                            contentHandler: event =>\\n                                emitContextEvent(customContext, event),\\n                        };\\n                    })\\n                );\\n            },\\n        };\\n    },\\n});\\n\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Now when you search for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"example\"), \" and open it, you will see that you're actually opening the settings, except that a watermark is added on the top right.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"This example itself of course isn't too realistic, but it shows what can be done by managing an entirely custom context.\"))));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<section><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"#io-context\" class=\"css-nn640c\"><h1>IO context</h1></a><p>The IO context is passed around in many areas of LaunchMenu, and is used to provide services that your applet can interact with. These services include:</p><ul><li>Management of an UI stack</li><li>Tracking of whether LM/an applet is running in dev mode</li><li>An undo/redo facility</li><li>A settings context from which setting values for your module can be extracted</li><li>All the global context menu bindings</li><li>Possibly A reference to the LM session the context is for</li></ul><p>Below is the exact interface of an IOContext:</p><style data-emotion=\"css 1x06cmw\">.css-1x06cmw{box-shadow:0px 0px 30px -5px rgba(0,0,0,0.3);border-radius:10px;overflow:hidden;margin-bottom:8px;}.css-1x06cmw .linenumber{min-width:30px!important;color:#AAA!important;}.css-1x06cmw span{word-break:break-all;}</style><div metastring=\"title=IIOContext.ts source=https://github.com/LaunchMenu/LaunchMenu/blob/master/packages/core/src/context/_types/IIOContext.ts\" class=\"css-1x06cmw\"><style data-emotion=\"css 1rf12ws\">.css-1rf12ws{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:#EEEEEE;}.css-1rf12ws .MuiButtonBase-root{padding:8px;border-radius:50%;}</style><div class=\"css-1rf12ws\"><style data-emotion=\"css 1iuj5ih\">.css-1iuj5ih{padding-left:8px;}</style><div class=\"css-1iuj5ih\">IIOContext.ts</div><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"https://github.com/LaunchMenu/LaunchMenu/blob/master/packages/core/src/context/_types/IIOContext.ts\" class=\"css-nn640c\"><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"view source\" title=\"View source\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3\"></path></svg></span></button></a><div class=\"MuiBox-root jss9\"></div><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy code\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z\"></path></svg></span></button><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Toggle line numbers\" title=\"Toggle line numbers\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"></path></svg></span></button><style data-emotion=\"css 1739oy8\">.css-1739oy8{z-index:1;}</style><div class=\"MuiBackdrop-root css-1739oy8\" aria-hidden=\"true\" style=\"opacity:0;visibility:hidden\"><div></div></div></div><code class=\"language-ts undefined\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;font-size:11px;line-height:14px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;display:block;background-color:#FAFAFA;padding:8px\"><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#0000ff\">export</span><span> </span><span class=\"token\" style=\"color:#0000ff\">type</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">IIOContext</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/**\n</span></span><span style=\"flex-wrap:wrap\">     * Retrieves all the UI data opened in this context\n</span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@param</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> </span><span class=\"token doc-comment parameter\" style=\"color:#008000;font-style:italic\">hook</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> The hook to subscribe to changes\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@returns</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> All the opened UI layers\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">getUI</span><span class=\"token\" style=\"color:#393A34\">(</span><span>hook</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IDataHook</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IUILayer</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/**\n</span></span><span style=\"flex-wrap:wrap\">     * Opens the given UI layer\n</span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@param</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> </span><span class=\"token doc-comment parameter\" style=\"color:#008000;font-style:italic\">layer</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> The layer of UI data to open\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@param</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> </span><span class=\"token doc-comment parameter\" style=\"color:#008000;font-style:italic\">config</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> Extra configuration\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@returns</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> A function that can be used to close the opened layer\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        layer</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IUILayer</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        config</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** A callback to perform when the layer is closed */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            onClose</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#0000ff\">void</span><span> </span><span class=\"token\" style=\"color:#393A34\">|</span><span> </span><span class=\"token known-class-name\" style=\"color:#2B91AF\">Promise</span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#0000ff\">void</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** The index on the stack to open this layer at */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            index</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token builtin\">number</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#393A34\">}</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token known-class-name\" style=\"color:#2B91AF\">Promise</span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#0000ff\">void</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/**\n</span></span><span style=\"flex-wrap:wrap\">     * Closes the given UI layer\n</span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@param</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> </span><span class=\"token doc-comment parameter\" style=\"color:#008000;font-style:italic\">layer</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> The layer of UI data to close\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">close</span><span class=\"token\" style=\"color:#393A34\">(</span><span>layer</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IUILayer</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token known-class-name\" style=\"color:#2B91AF\">Promise</span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#0000ff\">void</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/**\n</span></span><span style=\"flex-wrap:wrap\">     * Whether LM is running in dev mode\n</span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@param</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> </span><span class=\"token doc-comment parameter\" style=\"color:#008000;font-style:italic\">hook</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> The hook to subscribe to changes\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     * </span><span class=\"token doc-comment\" style=\"color:#0000ff;font-style:italic\">@returns</span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\"> Whether dev mode is enabled\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">     */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">isInDevMode</span><span class=\"token\" style=\"color:#393A34\">(</span><span>hook</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IDataHook</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token builtin\">boolean</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** The undo redo facility to undo changes */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">readonly</span><span> undoRedo</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IUndoRedoFacility</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** The application settings */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">readonly</span><span> settings</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">SettingsContext</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** The default context menu bindings to add to all context menus */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">readonly</span><span> contextMenuBindings</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">ISubscribable</span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token maybe-class-name\">IActionBinding</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token doc-comment\" style=\"color:#008000;font-style:italic\">/** The session that this context is for */</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">readonly</span><span> session</span><span class=\"token\" style=\"color:#393A34\">?</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">LMSession</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">;</span></span></code></div><section><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"#usage\" class=\"css-nn640c\"><h2>Usage</h2></a><p>There are several situations in which the context becomes of use:</p><ul><li>Wanting to dispatch <a href=\"/docs/concepts/interaction/undo-redo#commands\" class=\"css-0\">undoable commands</a></li><li>Wanting to open new UI <a href=\"/docs/concepts/ui/uilayers\" class=\"css-0\">using UI layers</a></li><li>Wanting to extract settings</li></ul><p>And since all of these are quite common, we&#x27;re passing the context around to as manu places as possible. Here&#x27;s a list of common places that you have access to the context:</p><ul><li>From <a href=\"/docs/concepts/interaction/search-system#searchables\" class=\"css-0\">a search query</a></li><li>From <a href=\"http://localhost:3000/docs/concepts/applet-format#open\" class=\"css-0\">a open callback</a></li><li>From a ui component using the <style data-emotion=\"css an0xih\">.css-an0xih{display:inline-block;background-color:#EEEEEE;word-break:break-word;}</style><code class=\"css-an0xih\">useIOContext</code> React hook</li><li>From <a href=\"/docs/concepts/interaction/common-actions#execute-action\" class=\"css-0\">an execute handler</a></li></ul></section><section><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"#overriding\" class=\"css-nn640c\"><h2>Overriding</h2></a><p>This context is passed around explicitely, in order to allow yoou to override parts of the context. For instance, if some component that you want to use makes use of the undo/redo facility, but you don&#x27;t want to mix the usage history of this component with the global one, you can supply your own undo/redo facility.</p><p>Overriding some part of the context is done easily, by using the <style data-emotion=\"css an0xih\">.css-an0xih{display:inline-block;background-color:#EEEEEE;word-break:break-word;}</style><code class=\"css-an0xih\">IOContext</code> class and specifying what the parent context is:</p><style data-emotion=\"css 1x06cmw\">.css-1x06cmw{box-shadow:0px 0px 30px -5px rgba(0,0,0,0.3);border-radius:10px;overflow:hidden;margin-bottom:8px;}.css-1x06cmw .linenumber{min-width:30px!important;color:#AAA!important;}.css-1x06cmw span{word-break:break-all;}</style><div metastring=\"title=contextOverrideExample.ts\" class=\"css-1x06cmw\"><style data-emotion=\"css 1rf12ws\">.css-1rf12ws{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:#EEEEEE;}.css-1rf12ws .MuiButtonBase-root{padding:8px;border-radius:50%;}</style><div class=\"css-1rf12ws\"><style data-emotion=\"css 1iuj5ih\">.css-1iuj5ih{padding-left:8px;}</style><div class=\"css-1iuj5ih\">contextOverrideExample.ts</div><div class=\"MuiBox-root jss10\"></div><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy code\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z\"></path></svg></span></button><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Toggle line numbers\" title=\"Toggle line numbers\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"></path></svg></span></button><style data-emotion=\"css 1739oy8\">.css-1739oy8{z-index:1;}</style><div class=\"MuiBackdrop-root css-1739oy8\" aria-hidden=\"true\" style=\"opacity:0;visibility:hidden\"><div></div></div></div><code class=\"language-ts undefined\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;font-size:11px;line-height:14px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;display:block;background-color:#FAFAFA;padding:8px\"><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#0000ff\">const</span><span> context </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\">// ... some existing context</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#0000ff\">const</span><span> customUndoRedo </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#0000ff\">new</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">UndoRedoFacility</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#0000ff\">const</span><span> subContext </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#0000ff\">new</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">IOContext</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    parent</span><span class=\"token\" style=\"color:#393A34\">:</span><span> context</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    undoRedo</span><span class=\"token\" style=\"color:#393A34\">:</span><span> customUndoRedo\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span></span></code></div><p>By specifying an existing context as the parent, the parent&#x27;s properties are inheretted. Additionally, the newly made sub-context is wrapped in a <style data-emotion=\"css an0xih\">.css-an0xih{display:inline-block;background-color:#EEEEEE;word-break:break-word;}</style><code class=\"css-an0xih\">SubIOContextLayer</code> <a href=\"/docs/concepts/ui/uilayers\" class=\"css-0\">ui layer</a> and added to the original context&#x27;s UI. This way, when any UI is added to the sub-context, it will also become part of the orginal context. When you&#x27;re done with your custom context, you can call <style data-emotion=\"css an0xih\">.css-an0xih{display:inline-block;background-color:#EEEEEE;word-break:break-word;}</style><code class=\"css-an0xih\">.destroy()</code> to close all its UI and remove it from its parent.</p></section><section><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"#custom-context\" class=\"css-nn640c\"><h2>Custom context</h2></a><p>One can also create an antirely new context. To this context you may pass your own facilities, or facilities from an existing context (possibly by passing the whole context as a shorthand). Then the UI of your own context will be independent of the rest of LaunchMenu, and you can do with it what you want.</p><p>In the example below a custom context is created, and used to render a LaunchMenu layout within the section that&#x27;s usually only contains the content of LaunchMenu. We then add a fake watermark on top of the entire UI, and open an existing applet using our custom context:</p><style data-emotion=\"css 1x06cmw\">.css-1x06cmw{box-shadow:0px 0px 30px -5px rgba(0,0,0,0.3);border-radius:10px;overflow:hidden;margin-bottom:8px;}.css-1x06cmw .linenumber{min-width:30px!important;color:#AAA!important;}.css-1x06cmw span{word-break:break-all;}</style><div metastring=\"title=src/index.tsx source=https://github.com/LaunchMenu/LM-applet-examples/tree/main/examples/baseContext video=https://raw.github.com/LaunchMenu/LM-applet-examples/main/examples/baseContext/recordings/demo.webm\" class=\"css-1x06cmw\"><style data-emotion=\"css 1rf12ws\">.css-1rf12ws{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:#EEEEEE;}.css-1rf12ws .MuiButtonBase-root{padding:8px;border-radius:50%;}</style><div class=\"css-1rf12ws\"><style data-emotion=\"css 1iuj5ih\">.css-1iuj5ih{padding-left:8px;}</style><div class=\"css-1iuj5ih\">src/index.tsx</div><style data-emotion=\"css nn640c\">.css-nn640c{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a href=\"https://github.com/LaunchMenu/LM-applet-examples/tree/main/examples/baseContext\" class=\"css-nn640c\"><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"view source\" title=\"View source\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3\"></path></svg></span></button></a><div class=\"MuiBox-root jss11\"></div><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Show demo\" title=\"Show demo\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M8 5v14l11-7z\"></path></svg></span></button><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy code\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z\"></path></svg></span></button><button class=\"MuiButtonBase-root MuiIconButton-root\" tabindex=\"0\" type=\"button\" aria-label=\"Toggle line numbers\" title=\"Toggle line numbers\"><span class=\"MuiIconButton-label\"><svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"></path></svg></span></button><style data-emotion=\"css 1739oy8\">.css-1739oy8{z-index:1;}</style><div class=\"MuiBackdrop-root css-1739oy8\" aria-hidden=\"true\" style=\"opacity:0;visibility:hidden\"><div><style data-emotion=\"css 1vrs79m\">.css-1vrs79m{border:2px solid #EEEEEE;width:100%;max-width:100%;}</style><div class=\"MuiBox-root jss12 css-1vrs79m\"><style data-emotion=\"css qhzqsw\">.css-qhzqsw{max-width:100%;width:100%;display:block;}</style><video class=\"css-qhzqsw\"><source src=\"https://raw.github.com/LaunchMenu/LM-applet-examples/main/examples/baseContext/recordings/demo.webm\" type=\"video/mp4\"/><p>Your browser doesn&#x27;t support HTML5 video. Here is a<!-- --> <a href=\"https://raw.github.com/LaunchMenu/LM-applet-examples/main/examples/baseContext/recordings/demo.webm\">link to the video</a> instead.</p></video><style data-emotion=\"css 1o4n3gn\">.css-1o4n3gn{position:absolute;left:0;right:0;bottom:0;top:0;}</style><style data-emotion=\"css tpej70\">.css-tpej70{pointer-events:none;position:absolute;left:0;right:0;bottom:0;top:0;}</style><div class=\"MuiBox-root jss13 css-tpej70\"><style data-emotion=\"css 6s3hx\">.css-6s3hx{color:#008DFA;}.css-6s3hx >*{position:absolute;}</style><div class=\"MuiBox-root jss14 css-6s3hx\"><style data-emotion=\"css 1lbyebv\">.css-1lbyebv{background-color:#fff;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);}</style><div class=\"MuiBox-root jss15 css-1lbyebv\" style=\"transform:scale(0)\"><style data-emotion=\"css 1riqxhg\">.css-1riqxhg{font-size:60px;}</style><svg class=\"MuiSvgIcon-root css-1riqxhg\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M8 5v14l11-7z\"></path></svg></div></div></div></div></div></div></div><code class=\"language-tsx undefined\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;font-size:11px;line-height:14px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;display:block;background-color:#FAFAFA;padding:8px\"><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#0000ff\">const</span><span> </span><span class=\"token maybe-class-name\">WaterMarked</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#36acaa\">FC</span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">{</span><span>context</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token maybe-class-name\">IOContext</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token parameter\" style=\"color:#393A34\">{</span><span class=\"token parameter\">context</span><span class=\"token parameter\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">const</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span>key</span><span class=\"token\" style=\"color:#393A34\">,</span><span> setKey</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">useState</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#008000;font-style:italic\">// Force a refresh after some delay, as this is required for the application layout to properly calculate the menu width (this is a bug)</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">useEffect</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#0000ff\">let</span><span> id </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">setTimeout</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">setKey</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">2</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">200</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#0000ff\">return</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">clearTimeout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>id</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#0000ff\">return</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#2B91AF\">FillBox</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token plain-text\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token plain-text\">            </span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#2B91AF\">ApplicationLayout</span><span class=\"token\" style=\"color:#800000\"> </span><span class=\"token\" style=\"color:#ff0000\">key</span><span class=\"token script language-javascript script-punctuation\" style=\"color:#800000\">=</span><span class=\"token script language-javascript\" style=\"color:#393A34\">{</span><span class=\"token script language-javascript\" style=\"color:#800000\">key</span><span class=\"token script language-javascript\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#800000\"> </span><span class=\"token\" style=\"color:#ff0000\">context</span><span class=\"token script language-javascript script-punctuation\" style=\"color:#800000\">=</span><span class=\"token script language-javascript\" style=\"color:#393A34\">{</span><span class=\"token script language-javascript\" style=\"color:#800000\">context</span><span class=\"token script language-javascript\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#800000\"> </span><span class=\"token\" style=\"color:#393A34\">/&gt;</span><span class=\"token plain-text\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token plain-text\">            </span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#2B91AF\">Box</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">position</span><span class=\"token attr-equals\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#0000ff\">absolute</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">right</span><span class=\"token attr-equals\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#0000ff\">none</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">top</span><span class=\"token attr-equals\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#0000ff\">none</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">font</span><span class=\"token attr-equals\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#0000ff\">header</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">zIndex</span><span class=\"token script language-javascript script-punctuation\" style=\"color:#800000\">=</span><span class=\"token script language-javascript\" style=\"color:#393A34\">{</span><span class=\"token script language-javascript\" style=\"color:#36acaa\">100</span><span class=\"token script language-javascript\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#800000\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token\" style=\"color:#800000\">                </span><span class=\"token\" style=\"color:#ff0000\">padding</span><span class=\"token attr-equals\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#0000ff\">medium</span><span class=\"token\" style=\"color:#393A34\">&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token plain-text\">\n</span></span><span style=\"flex-wrap:wrap\">                Powered by Bob\n</span><span style=\"flex-wrap:wrap\"><span class=\"token plain-text\">            </span><span class=\"token\" style=\"color:#393A34\">&lt;/</span><span class=\"token\" style=\"color:#2B91AF\">Box</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span class=\"token plain-text\">\n</span></span><span style=\"flex-wrap:wrap\"><span class=\"token plain-text\">        </span><span class=\"token\" style=\"color:#393A34\">&lt;/</span><span class=\"token\" style=\"color:#2B91AF\">FillBox</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#0000ff\">export</span><span> </span><span class=\"token\" style=\"color:#0000ff\">default</span><span> </span><span class=\"token\" style=\"color:#0000ff\">declare</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    info</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    settings</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">withSession</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token parameter\">session</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#0000ff\">const</span><span> </span><span class=\"token function-variable\" style=\"color:#393A34\">getSettingsApplet</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            session</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token method property-access\" style=\"color:#393A34\">getApplets</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token method property-access\" style=\"color:#393A34\">find</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token parameter\" style=\"color:#393A34\">{</span><span class=\"token parameter\">info</span><span class=\"token parameter\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> info</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token property-access\">name</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token method property-access\" style=\"color:#393A34\">match</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token regex-delimiter\" style=\"color:#ff0000\">/</span><span class=\"token regex-source language-regex\" style=\"color:#ff0000\">settings</span><span class=\"token regex-delimiter\" style=\"color:#ff0000\">/</span><span class=\"token regex-flags\" style=\"color:#ff0000\">i</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#0000ff\">return</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            </span><span class=\"token\" style=\"color:#393A34\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token parameter\" style=\"color:#393A34\">{</span><span class=\"token parameter\">context</span><span class=\"token parameter\" style=\"color:#393A34\">,</span><span class=\"token parameter\"> onClose</span><span class=\"token parameter\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#0000ff\">const</span><span> customContext </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#0000ff\">new</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">IOContext</span><span class=\"token\" style=\"color:#393A34\">(</span><span>context</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#0000ff\">const</span><span> settingsApplet </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">getSettingsApplet</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#0000ff\">if</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">!</span><span>settingsApplet </span><span class=\"token\" style=\"color:#393A34\">||</span><span> </span><span class=\"token\" style=\"color:#393A34\">!</span><span>settingsApplet</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token property-access\">open</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#0000ff\">return</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#008000;font-style:italic\">// Hide the content section by default</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                customContext</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token method property-access\" style=\"color:#393A34\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                    </span><span class=\"token\" style=\"color:#0000ff\">new</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">UILayer</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#393A34\">{</span><span>contentView</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>close</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#36acaa\">true</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            </span><span class=\"token\" style=\"color:#008000;font-style:italic\">// Prevent transparent overlay from showing</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            showNodataOverlay</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#36acaa\">false</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#393A34\">}</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                    </span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#008000;font-style:italic\">// Open a new layer in the regular context,  containing our watermarked UI + opened settings + forward key events</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                context</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token method property-access\" style=\"color:#393A34\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                    </span><span class=\"token\" style=\"color:#0000ff\">new</span><span> </span><span class=\"token maybe-class-name\" style=\"color:#2B91AF\">UILayer</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token parameter\">ctx</span><span class=\"token parameter\" style=\"color:#393A34\">,</span><span class=\"token parameter\"> close</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        settingsApplet</span><span class=\"token\" style=\"color:#393A34\">!</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token property-access\">open</span><span class=\"token\" style=\"color:#393A34\">!</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            context</span><span class=\"token\" style=\"color:#393A34\">:</span><span> customContext</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            </span><span class=\"token function-variable\" style=\"color:#393A34\">onClose</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                                </span><span class=\"token\" style=\"color:#393A34\">close</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                                </span><span class=\"token\" style=\"color:#393A34\">onClose</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\">\n</span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#0000ff\">return</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            fieldView</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>close</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#36acaa\">true</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            menuView</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>close</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#36acaa\">true</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            contentView</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                                </span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#2B91AF\">WaterMarked</span><span class=\"token\" style=\"color:#800000\"> </span><span class=\"token\" style=\"color:#ff0000\">context</span><span class=\"token script language-javascript script-punctuation\" style=\"color:#800000\">=</span><span class=\"token script language-javascript\" style=\"color:#393A34\">{</span><span class=\"token script language-javascript\" style=\"color:#800000\">customContext</span><span class=\"token script language-javascript\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#800000\"> </span><span class=\"token\" style=\"color:#393A34\">/&gt;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                            </span><span class=\"token function-variable\" style=\"color:#393A34\">contentHandler</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token parameter\">event</span><span> </span><span class=\"token arrow\" style=\"color:#393A34\">=&gt;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                                </span><span class=\"token\" style=\"color:#393A34\">emitContextEvent</span><span class=\"token\" style=\"color:#393A34\">(</span><span>customContext</span><span class=\"token\" style=\"color:#393A34\">,</span><span> event</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                        </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                    </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>                </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>            </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>        </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">;</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span>    </span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span></span><span style=\"flex-wrap:wrap\"><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">;</span></span></code></div><p>Now when you search for <style data-emotion=\"css an0xih\">.css-an0xih{display:inline-block;background-color:#EEEEEE;word-break:break-word;}</style><code class=\"css-an0xih\">example</code> and open it, you will see that you&#x27;re actually opening the settings, except that a watermark is added on the top right.</p><p>This example itself of course isn&#x27;t too realistic, but it shows what can be done by managing an entirely custom context.</p></section></section>","scope":{}},"ToC":[{"name":"IO context","children":[{"name":"Usage","children":[]},{"name":"Overriding","children":[]},{"name":"Custom context","children":[]}]}],"index":{"rootPath":"/docs","items":[{"name":"Guide","opened":false,"children":[{"name":"1.-Overview"},{"name":"2.-Environment-setup"},{"name":"3.-Applet-interface"},{"name":"4.-Items-and-searches"},{"name":"5.-Content-and-theming"},{"name":"6.-UILayers-and-menus"},{"name":"7.-Settings"},{"name":"8.-Actions"},{"name":"9.-Publishing-and-usage"}]},{"name":"Concepts","opened":true,"children":[{"name":"Applet-format"},{"name":"base","opened":true,"children":[{"name":"LaunchMenu"},{"name":"Session"},{"name":"IOContext","selected":true}]},{"name":"UI","opened":false,"children":[{"name":"MenuItems"},{"name":"UILayers"},{"name":"Menu"},{"name":"TextField"},{"name":"Content"}]},{"name":"Interaction","opened":false,"children":[{"name":"Actions"},{"name":"Common-actions"},{"name":"Search-system"},{"name":"Undo-redo"},{"name":"Key-handlers"}]},{"name":"Settings"}]},{"name":"API-overview"}]}},"__N_SSG":true}